---
import Container from "../ui/Container.astro";

const { subtitle = "" } = Astro.props;
---

<section
  class="bg-[url('/src/assets/images/Breadcrumb-BG.png')] bg-cover bg-center bg-no-repeat pt-[190px] pb-[112px] min-[1280px]:pt-[200px] min-[1440px]:pt-[240px] max-[991px]:pt-[140px] max-[991px]:pb-[80px] max-[767px]:pt-[130px] max-[767px]:pb-[60px]"
>
  <Container>
    <div
      class="flex flex-col items-center text-center"
      data-instruction-breadcrumb-animate
    >
      <p
        class="text-gradient text-[20px] font-medium leading-[1.3] max-[767px]:text-[18px]"
      >
        {subtitle}
      </p>
      <div
        class="mt-5 max-w-[600px] min-[1280px]:max-w-[650px] min-[1440px]:max-w-[720px] max-[991px]:max-w-[500px] max-[767px]:mt-4"
      >
        <h1
          class="font-title text-[length:var(--_typography-size---typography--h1)] font-normal leading-[1.2] tracking-[-0.02em] text-white"
        >
          <span class="highlight-text font-semibold">Zarex</span>
          <span>Instruction</span> Guide
        </h1>
      </div>
    </div>
  </Container>
</section>

<style>
  [data-instruction-breadcrumb-animate] {
    opacity: 0;
    filter: blur(100px);
    transform: translateY(40px);
    transition:
      opacity 0.8s ease,
      filter 0.8s ease,
      transform 0.8s ease;
  }

  [data-instruction-breadcrumb-animate].animate-in {
    opacity: 1;
    filter: blur(0);
    transform: translateY(0);
  }
</style>

<script>
  const initInstructionBreadcrumbAnimation = () => {
    const animatedElements = document.querySelectorAll(
      "[data-instruction-breadcrumb-animate]",
    );

    if (!animatedElements.length) return;

    const observer = new IntersectionObserver(
      (entries: IntersectionObserverEntry[]) => {
        entries.forEach((entry: IntersectionObserverEntry) => {
          if (entry.isIntersecting) {
            const el = entry.target as HTMLElement;
            el.classList.add("animate-in");
            observer.unobserve(el);
          }
        });
      },
      {
        threshold: 0.2,
        rootMargin: "0px 0px -50px 0px",
      },
    );

    animatedElements.forEach((el) => observer.observe(el));
  };

  document.addEventListener(
    "DOMContentLoaded",
    initInstructionBreadcrumbAnimation,
  );
  document.addEventListener(
    "astro:page-load",
    initInstructionBreadcrumbAnimation,
  );
</script>

