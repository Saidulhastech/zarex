---
import Container from "../ui/Container.astro";
import AppImage from "../ui/AppImage.astro";

const tabButtonBase =
  "cursor-pointer rounded-[8px] bg-transparent px-[15px] py-[15px] text-left text-[18px] font-medium text-white transition-colors duration-500 hover:bg-[#d8ae6b] hover:text-[#0e1522]";
const tabPanelBase =
  "rounded-[8px] border border-[#d8ae6b] p-10 max-[767px]:p-5 text-[#c4c4c4]";
---

<section
  class="py-[var(--_typography-size---gap--section-gap)]"
  data-instruction-tabs
>
  <Container>
    <div class="relative flex items-start max-[991px]:flex-col">
      <div
        class="sticky top-[50px] flex w-[35%] flex-col gap-[6px] rounded-[8px] border border-[#d8ae6b] bg-[var(--color-black)] p-5 min-[1280px]:w-[360px] max-[991px]:mb-[30px] max-[991px]:w-full max-[991px]:flex-row max-[991px]:flex-wrap max-[767px]:p-[15px]"
        role="tablist"
        data-instruction-animate
        data-instruction-delay="0.05"
      >
        <button
          type="button"
          id="tab-button-1"
          class={`${tabButtonBase} bg-[#d8ae6b] text-[#0e1522]`}
          data-tab-button="tab-1"
          aria-selected="true"
          aria-controls="tab-panel-1"
          role="tab"
        >
          Change Colors &amp; Typography
        </button>
        <button
          type="button"
          id="tab-button-2"
          class={tabButtonBase}
          data-tab-button="tab-2"
          aria-selected="false"
          aria-controls="tab-panel-2"
          role="tab"
        >
          Edit Text &amp; Images
        </button>
        <button
          type="button"
          id="tab-button-3"
          class={tabButtonBase}
          data-tab-button="tab-3"
          aria-selected="false"
          aria-controls="tab-panel-3"
          role="tab"
        >
          Use Custom SVG Icons
        </button>
        <button
          type="button"
          id="tab-button-4"
          class={tabButtonBase}
          data-tab-button="tab-4"
          aria-selected="false"
          aria-controls="tab-panel-4"
          role="tab"
        >
          Customize Other Animations &amp; Interactions
        </button>
        <button
          type="button"
          id="tab-button-5"
          class={tabButtonBase}
          data-tab-button="tab-5"
          aria-selected="false"
          aria-controls="tab-panel-5"
          role="tab"
        >
          SEO &amp; Meta Settings
        </button>
        <button
          type="button"
          id="tab-button-6"
          class={tabButtonBase}
          data-tab-button="tab-6"
          aria-selected="false"
          aria-controls="tab-panel-6"
          role="tab"
        >
          Smooth Scroll Effect
        </button>
        <button
          type="button"
          id="tab-button-7"
          class={tabButtonBase}
          data-tab-button="tab-7"
          aria-selected="false"
          aria-controls="tab-panel-7"
          role="tab"
        >
          Using Lottie File
        </button>
      </div>

      <div
        class="ml-[40px] flex-1 max-[991px]:ml-0"
        data-instruction-animate
        data-instruction-delay="0.15"
      >
        <div
          id="tab-panel-1"
          class={tabPanelBase}
          data-tab-panel="tab-1"
          role="tabpanel"
          aria-labelledby="tab-button-1"
        >
          <h2 class="text-white">Change colors &amp; typography</h2>
          <ol class="mt-4 mb-0 flex list-decimal flex-col gap-3 pl-10">
            <li>Open <strong>src/styles/global.css</strong>.</li>
            <li>
              Update the CSS variables under <strong>:root</strong> for brand colors
              and sizing.
            </li>
            <li>
              Update Tailwind tokens in <strong>tailwind.config.mjs</strong> if you
              want new utility classes.
            </li>
            <li>
              Change fonts in <strong>src/layouts/BaseLayout.astro</strong> and update
              font families in <strong>src/styles/global.css</strong>.
            </li>
          </ol>
          <figure class="mb-0 mt-4">
            <div>
              <AppImage
                src="/images/how-to-assign-variables.webp"
                alt="Theme variables example"
                width="1200"
                height="800"
                loading="lazy"
              />
            </div>
          </figure>
          <p class="mt-5 max-[767px]:mt-4">
            Tip: keep typography and color changes in variables so the whole
            site stays consistent.
          </p>
          <figure class="mb-0 mt-4">
            <div>
              <AppImage
                src="/images/css-panel.webp"
                alt="Theme CSS editing example"
                width="1200"
                height="800"
                loading="lazy"
              />
            </div>
          </figure>
        </div>

        <div
          id="tab-panel-2"
          class={`${tabPanelBase} hidden`}
          data-tab-panel="tab-2"
          role="tabpanel"
          aria-labelledby="tab-button-2"
        >
          <h3 class="font-semibold text-white">Edit text content</h3>
          <ul class="mb-2.5 list-disc pl-10">
            <li>
              Update page data in <strong>src/data/*.ts</strong> (home, home-two,
              about-us, features, pricing-plan, contact-us).
            </li>
            <li>
              Update page titles and descriptions in <strong
                >src/pages/*.astro</strong
              >.
            </li>
            <li>Update blog posts in <strong>src/content/blog</strong>.</li>
          </ul>
          <h3 class="font-semibold text-white">Replace images and assets</h3>
          <ol class="mb-2.5 list-decimal pl-10">
            <li>
              Replace images in <strong>src/assets/images</strong> and update the
              paths in data files or components.
            </li>
            <li>
              Put static files (videos, downloads) in <strong>public/</strong> and
              reference them with absolute paths like <strong
                >/videos/...</strong
              >.
            </li>
          </ol>
          <figure class="mb-0 mt-4">
            <div>
              <AppImage
                src="/images/image-replace.webp"
                alt="Example of updating images in the project"
                width="1200"
                height="800"
                loading="lazy"
              />
            </div>
          </figure>
        </div>

        <div
          id="tab-panel-3"
          class={`${tabPanelBase} hidden`}
          data-tab-panel="tab-3"
          role="tabpanel"
          aria-labelledby="tab-button-3"
        >
          <h3 class="font-semibold text-white">Use custom SVG icons</h3>
          <ol class="mb-2.5 list-decimal pl-10">
            <li>
              Replace SVG files in <strong>src/assets/images</strong> if they are
              used as images.
            </li>
            <li>
              For inline SVGs, open the component in <strong
                >src/components</strong
              > and paste your new SVG markup.
            </li>
            <li>Save and refresh the page.</li>
          </ol>
          <figure class="mb-0 mt-4">
            <div>
              <AppImage
                src="/images/svg-edit.webp"
                alt="Example of editing SVG markup"
                width="1200"
                height="800"
                loading="lazy"
              />
            </div>
          </figure>
        </div>

        <div
          id="tab-panel-4"
          class={`${tabPanelBase} hidden`}
          data-tab-panel="tab-4"
          role="tabpanel"
          aria-labelledby="tab-button-4"
        >
          <h3 class="font-semibold text-white">Customize animations</h3>
          <ol class="mb-2.5 list-decimal pl-10">
            <li>
              Open <strong>src/scripts/base-layout.js</strong> to edit GSAP animations
              and ScrollTrigger logic.
            </li>
            <li>
              Find the section selector and adjust duration, easing, or trigger
              positions.
            </li>
            <li>
              Keep <strong>prefers-reduced-motion</strong> checks for accessibility.
            </li>
          </ol>
          <figure class="mb-0 mt-4">
            <div>
              <AppImage
                src="/images/interaction-add.webp"
                alt="Example of adjusting animation settings"
                width="1200"
                height="800"
                loading="lazy"
              />
            </div>
          </figure>
        </div>

        <div
          id="tab-panel-5"
          class={`${tabPanelBase} hidden`}
          data-tab-panel="tab-5"
          role="tabpanel"
          aria-labelledby="tab-button-5"
        >
          <h3 class="font-semibold text-white">SEO &amp; meta settings</h3>
          <ol class="mb-2.5 list-decimal pl-10">
            <li>
              Update defaults in <strong>src/layouts/BaseLayout.astro</strong> (site
              name, description, OG image, Twitter handle).
            </li>
            <li>
              Set the production URL in <strong>astro.config.mjs</strong>.
            </li>
            <li>
              Override per-page SEO in <strong>src/pages/*.astro</strong> using the
              <strong>title</strong> and <strong>description</strong> props.
            </li>
          </ol>
          <figure class="mb-0 mt-4">
            <div>
              <AppImage
                src="/images/meta-edit.webp"
                alt="Example of SEO metadata configuration"
                width="1200"
                height="800"
                loading="lazy"
              />
            </div>
          </figure>
          <p class="mt-5 max-[767px]:mt-4">
            This controls how your pages appear in search results and social
            shares.
          </p>
        </div>

        <div
          id="tab-panel-6"
          class={`${tabPanelBase} hidden`}
          data-tab-panel="tab-6"
          role="tabpanel"
          aria-labelledby="tab-button-6"
        >
          <h3 class="font-semibold text-white">Smooth scroll effect</h3>
          <ol class="mb-2.5 list-decimal pl-10">
            <li>
              Lenis is configured in <strong>src/scripts/base-layout.js</strong
              >.
            </li>
            <li>
              Vendor files are loaded from <strong>public/scripts</strong> in <strong
                >src/layouts/BaseLayout.astro</strong
              >.
            </li>
            <li>
              Edit the media query in <strong>base-layout.js</strong> to disable smooth
              scroll on smaller screens.
            </li>
          </ol>
          <figure class="mb-0 mt-4">
            <div>
              <AppImage
                src="/images/instructions-gsap.webp"
                alt="Smooth scroll setup example"
                width="1200"
                height="800"
                loading="lazy"
              />
            </div>
          </figure>
        </div>

        <div
          id="tab-panel-7"
          class={`${tabPanelBase} hidden`}
          data-tab-panel="tab-7"
          role="tabpanel"
          aria-labelledby="tab-button-7"
        >
          <h3 class="font-semibold text-white">Using Lottie files</h3>
          <ul class="mb-2.5 list-disc pl-10">
            <li>
              Place Lottie JSON files in <strong>public/documents</strong>.
            </li>
            <li>
              The runtime is in <strong>public/vendor/lottie.min.js</strong>.
            </li>
            <li>
              Edit animation initialization in <strong
                >public/scripts/wcu-lottie.js</strong
              >.
            </li>
          </ul>
          <figure class="mb-0 mt-4">
            <div>
              <AppImage
                src="/images/lottie-icon.webp"
                alt="Example of Lottie animation setup"
                width="1200"
                height="800"
                loading="lazy"
              />
            </div>
          </figure>
        </div>
      </div>
    </div>
  </Container>
</section>

<script is:inline>
  (() => {
    const root = document.querySelector("[data-instruction-tabs]");
    if (!root) return;

    const buttons = Array.from(root.querySelectorAll("[data-tab-button]"));
    const panels = Array.from(root.querySelectorAll("[data-tab-panel]"));

    const setActive = (tab) => {
      buttons.forEach((button) => {
        const isActive = button.dataset.tabButton === tab;
        button.classList.toggle("bg-[#d8ae6b]", isActive);
        button.classList.toggle("text-[#0e1522]", isActive);
        button.classList.toggle("text-white", !isActive);
        button.classList.toggle("bg-transparent", !isActive);
        button.setAttribute("aria-selected", String(isActive));
      });

      panels.forEach((panel) => {
        panel.classList.toggle("hidden", panel.dataset.tabPanel !== tab);
      });
    };

    buttons.forEach((button) => {
      button.addEventListener("click", () =>
        setActive(button.dataset.tabButton),
      );
    });

    setActive("tab-1");
  })();
</script>

<style>
  [data-instruction-animate] {
    opacity: 0;
    filter: blur(60px);
    transform: translateY(30px);
    transition:
      opacity 0.8s ease,
      filter 0.8s ease,
      transform 0.8s ease;
  }

  [data-instruction-animate].animate-in {
    opacity: 1;
    filter: blur(0);
    transform: translateY(0);
  }
</style>

<script>
  const initInstructionAnimation = () => {
    const animatedElements = document.querySelectorAll(
      "[data-instruction-animate]",
    );

    if (!animatedElements.length) return;

    animatedElements.forEach((element) => {
      element.classList.add("animate-in");
    });
  };

  document.addEventListener("DOMContentLoaded", initInstructionAnimation);
  document.addEventListener("astro:page-load", initInstructionAnimation);
</script>
