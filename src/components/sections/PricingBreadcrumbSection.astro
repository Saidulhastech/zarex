---
import Container from "../ui/Container.astro";

const { breadcrumb } = Astro.props;
---

<section
  class="bg-[url('/src/assets/images/Breadcrumb-BG.png')] bg-cover bg-center bg-no-repeat pt-[190px] pb-[112px] min-[1280px]:pt-[200px] min-[1440px]:pt-[240px] max-[767px]:pt-[140px] max-[767px]:pb-[80px] max-[479px]:pt-[130px] max-[479px]:pb-[60px]"
>
  <Container>
    <div class="flex flex-col items-center text-center" data-breadcrumb-animate>
      <div
        class="text-gradient text-[20px] font-medium leading-[1.3] max-[479px]:text-[18px]"
      >
        {breadcrumb.subtitle}
      </div>
      <div
        class="mt-[20px] max-w-[580px] min-[1440px]:max-w-[680px] max-[767px]:max-w-[500px] max-[479px]:mt-4"
      >
        <h1
          class="font-title text-[length:var(--_typography-size---typography--h1)] font-normal leading-[1.2] tracking-[-0.02em] text-white"
        >
          {breadcrumb.title.prefix}
          <span class="highlight-text">{breadcrumb.title.highlight}</span>
          {breadcrumb.title.suffix}
        </h1>
      </div>
    </div>
  </Container>
</section>

<style>
  [data-breadcrumb-animate] {
    opacity: 0;
    filter: blur(100px);
    transform: translateY(40px);
    transition:
      opacity 0.8s ease,
      filter 0.8s ease,
      transform 0.8s ease;
  }

  [data-breadcrumb-animate].animate-in {
    opacity: 1;
    filter: blur(0);
    transform: translateY(0);
  }
</style>

<script>
  const initPricingBreadcrumbAnimation = () => {
    const animatedElements = document.querySelectorAll(
      "[data-breadcrumb-animate]",
    );

    if (!animatedElements.length) return;

    const observer = new IntersectionObserver(
      (entries: IntersectionObserverEntry[]) => {
        entries.forEach((entry: IntersectionObserverEntry) => {
          if (entry.isIntersecting) {
            const el = entry.target as HTMLElement;
            el.classList.add("animate-in");
            observer.unobserve(el);
          }
        });
      },
      {
        threshold: 0.2,
        rootMargin: "0px 0px -50px 0px",
      },
    );

    animatedElements.forEach((el) => observer.observe(el));
  };

  document.addEventListener("DOMContentLoaded", initPricingBreadcrumbAnimation);
  document.addEventListener("astro:page-load", initPricingBreadcrumbAnimation);
</script>

