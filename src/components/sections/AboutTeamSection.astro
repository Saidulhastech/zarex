---
import Container from "../ui/Container.astro";
import AppImage from "../ui/AppImage.astro";

const { team } = Astro.props;
---

<section
  class="team-section bg-[url('/src/assets/images/team-bg.png')] bg-cover bg-center py-[var(--_typography-size---gap--section-gap)] text-white overflow-hidden"
  data-about-team
>
  <Container>
    <div class="team-inner-block">
      <div class="section-heading-block" data-about-team-heading>
        <div class="section-title-block">
          <h2
            class="section-title font-title text-[length:var(--_typography-size---typography--h2)] font-normal leading-[1.2] tracking-[-0.02em] text-white"
          >
            {team.title.prefix}
            <span class="highlight-text">{team.title.highlight}</span>
            {team.title.suffix}
          </h2>
        </div>
        <div
          class="section-summary-block max-w-[528px] mt-[var(--_typography-size---gap--subtitle-gap)]"
        >
          <p class="section-summary text-[18px] text-[#c4c4c4]">
            {team.summary}
          </p>
        </div>
      </div>

      <div class="team-wrapper mt-[var(--_typography-size---gap--content-gap)]">
        <div
          class="team-slider-wrap w-slider relative flex items-start justify-center w-full max-[991px]:mb-[70px] max-[767px]:mb-[60px]"
        >
          <div
            class="team-slider-mask w-slider-mask w-full max-w-full overflow-hidden mx-auto"
            data-about-team-viewport
          >
            <div
              class="team-slider-track flex w-full gap-[24px]"
              data-about-team-track
            >
              {
                team.members.map(
                  (member: { name: string; role: string; image: string }) => (
                    <div
                      class="team-slider-item w-slide w-[calc(33.333%_-_16px)] flex-none max-[991px]:w-[calc(50%_-_12px)] max-[479px]:w-full"
                      data-about-team-slide
                    >
                      <div class="team-slider-block relative">
                        <div class="team-slider-image-block relative aspect-4/5 overflow-hidden rounded-[16px] p-px pb-[2px]">
                          <AppImage
                            src={member.image}
                            alt={member.name}
                            width="412"
                            height="515"
                            class="team-slider-image relative z-10 h-full w-full rounded-[16px] border border-white/10 object-cover"
                            loading="lazy"
                          />
                          <div class="team-slider-bg absolute inset-0 rounded-[16px] bg-linear-to-b from-[#d8ae6b4d] to-[#1ad0794d]" />
                        </div>
                        <div
                          class="team-slider-content-block absolute bottom-[24px] left-[28px] right-[28px] z-10 overflow-hidden rounded-[12px] px-[16px] py-[20px] max-[991px]:bottom-[15px] max-[991px]:left-[15px] max-[991px]:right-[15px] max-[991px]:p-[10px]"
                          data-about-team-content
                        >
                          <div class="team-name relative z-20 text-center font-title text-[20px] font-medium leading-[1.4] text-white max-[991px]:text-[18px]">
                            {member.name}
                          </div>
                          <div class="team-designation relative z-20 mt-1 text-center text-[14px] text-[#c4c4c4]">
                            {member.role}
                          </div>
                          <div class="team-blur-block absolute inset-0 z-[15] rounded-[16px] bg-[#353535cc]" />
                        </div>
                      </div>
                    </div>
                  ),
                )
              }
            </div>
          </div>

          <button
            type="button"
            aria-label="Previous team member"
            class="slider-arrow-block left absolute -top-[90px] right-[60px] flex h-9 w-9 items-center justify-center rounded-full border border-white text-white transition hover:border-transparent hover:bg-[var(--color--primary)] hover:text-white cursor-pointer max-[767px]:top-auto max-[767px]:bottom-[-60px] max-[767px]:right-auto max-[767px]:left-[calc(50%_-_50px)]"
            data-about-team-prev
          >
            <svg
              width="18"
              height="16"
              viewBox="0 0 18 16"
              fill="none"
              aria-hidden="true"
            >
              <path
                d="M8.37938 15.501L0.9375 8.00098L8.37938 0.500977M1.97156 8.00098H17.0625"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </svg>
          </button>
          <button
            type="button"
            aria-label="Next team member"
            class="slider-arrow-block right absolute -top-[90px] right-0 flex h-9 w-9 items-center justify-center rounded-full border border-white text-white transition hover:border-transparent hover:bg-[var(--color--primary)] hover:text-white cursor-pointer max-[767px]:top-auto max-[767px]:bottom-[-60px] max-[767px]:right-[calc(50%_-_50px)]"
            data-about-team-next
          >
            <svg
              width="18"
              height="16"
              viewBox="0 0 18 16"
              fill="none"
              aria-hidden="true"
            >
              <path
                d="M9.62062 15.501L17.0625 8.00098L9.62062 0.500977M16.0284 8.00098H0.9375"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"></path>
            </svg>
          </button>
          <div
            class="none w-slider-nav w-round w-num hidden"
            aria-hidden="true"
          >
          </div>
        </div>
      </div>
    </div>
  </Container>
</section>

<style>
  /* Extra smooth scrolling for the track if JS fails */
  .team-slider-track {
    will-change: transform;
  }

  .team-slider-item {
    transform: translate3d(0, 0, 0) scale3d(0.7, 0.7, 1) rotateX(0deg)
      rotateY(0deg) rotateZ(0deg) skew(0deg, 0deg);
    transition:
      transform 0.5s ease,
      opacity 0.5s ease;
    transform-style: preserve-3d;
  }

  .team-slider-content-block {
    opacity: 0;
    transform: translateY(12px);
    will-change: transform, opacity;
  }
</style>

