---
import Container from "../ui/Container.astro";

const { subtitle = "", titleHighlight = "", titleSuffix = "" } = Astro.props;
---

<section class="bg-[url('/src/assets/images/Breadcrumb-BG.png')] bg-cover bg-center bg-no-repeat pt-[190px] pb-[112px] min-[1280px]:pt-[200px] min-[1440px]:pt-[240px] max-[991px]:pt-[140px] max-[991px]:pb-[80px] max-[767px]:pt-[130px] max-[767px]:pb-[60px]">
  <Container>
    <div
      class="flex flex-col items-center text-center"
      data-style-guide-breadcrumb-animate
      data-style-guide-breadcrumb-delay="0.05"
    >
      <p
        class="text-gradient text-[20px] font-medium leading-[1.3] max-[767px]:text-[18px]"
        data-style-guide-breadcrumb-animate
        data-style-guide-breadcrumb-delay="0.12"
      >
        {subtitle}
      </p>
      <div
        class="mt-5 max-w-[600px] min-[1280px]:max-w-[650px] min-[1440px]:max-w-[720px] max-[991px]:max-w-[500px] max-[767px]:mt-4"
        data-style-guide-breadcrumb-animate
        data-style-guide-breadcrumb-delay="0.2"
      >
        <h1 class="font-title text-[length:var(--_typography-size---typography--h1)] font-normal leading-[1.2] tracking-[-0.02em] text-white">
          <span class="highlight-text font-semibold">{titleHighlight}</span> {titleSuffix}
        </h1>
      </div>
    </div>
  </Container>
</section>

<style>
  [data-style-guide-breadcrumb-animate] {
    opacity: 0;
    transform: translateY(26px);
    filter: blur(20px);
    transition:
      opacity 0.6s ease,
      transform 0.6s ease,
      filter 0.6s ease;
  }

  [data-style-guide-breadcrumb-animate].animate-in {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
</style>

<script>
  const initStyleGuideBreadcrumbAnimation = () => {
    const animatedElements = document.querySelectorAll(
      "[data-style-guide-breadcrumb-animate]",
    );

    if (!animatedElements.length) return;

    const prefersReducedMotion = window.matchMedia(
      "(prefers-reduced-motion: reduce)",
    ).matches;

    if (prefersReducedMotion) {
      animatedElements.forEach((element) => {
        element.classList.add("animate-in");
      });
      return;
    }

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (!entry.isIntersecting) return;
          const el = entry.target as HTMLElement;
          const delay = parseFloat(
            el.dataset.styleGuideBreadcrumbDelay || "0",
          );

          setTimeout(() => {
            el.classList.add("animate-in");
          }, delay * 1000);

          observer.unobserve(el);
        });
      },
      {
        threshold: 0.2,
        rootMargin: "0px 0px -60px 0px",
      },
    );

    animatedElements.forEach((el) => observer.observe(el));
  };

  document.addEventListener(
    "DOMContentLoaded",
    initStyleGuideBreadcrumbAnimation,
  );
  document.addEventListener(
    "astro:page-load",
    initStyleGuideBreadcrumbAnimation,
  );
</script>

